[uwsgi]
module = speciesnetd:app
master = true
processes = 4
threads = 2
socket = 0.0.0.0:5001
protocol = http
buffer-size = 32768

# Enable Python threads
enable-threads = true

# Set Python path if needed
# pythonpath = /path/to/python/packages

# Logging
logto = /var/log/uwsgi/speciesnetd.log

# Run as specific user and group (optional, for production)
# uid = www-data
# gid = www-data

# Clean environment on exit
vacuum = true

# Graceful shutdown on SIGTERM
die-on-term = true

# Increase timeouts for large request/response handling
harakiri = 300
socket-timeout = 300
http-timeout = 300

# Memory management
cheaper = 2
cheaper-initial = 2
cheaper-step = 1
workers = 4